<script>
const trackLength = 1200; // Make the track longer
const numberOfCheckpoints = 6;
const minSpacing = 120; // Minimum spacing between checkpoints, start, and finish (adjust as needed)

// Generate random positions for checkpoints with the required spacing
function generateCheckpoints(trackLength, numberOfCheckpoints, minSpacing) {
    const checkpoints = [];
    let attempts = 0;

    while (checkpoints.length < numberOfCheckpoints && attempts < 1000) {
        // Random position between start+minSpacing and finish-minSpacing
        const pos = Math.floor(Math.random() * (trackLength - 2 * minSpacing)) + minSpacing;

        // Ensure this position is far enough from all other checkpoints
        let valid = true;
        for (let cp of checkpoints) {
            if (Math.abs(cp - pos) < minSpacing) {
                valid = false;
                break;
            }
        }
        // Also ensure spacing from start (0) and finish (trackLength)
        if (valid && Math.abs(0 - pos) >= minSpacing && Math.abs(trackLength - pos) >= minSpacing) {
            checkpoints.push(pos);
        }
        attempts++;
    }

    // Sort checkpoints for easier use/display
    checkpoints.sort((a, b) => a - b);
    return checkpoints;
}

const checkpoints = generateCheckpoints(trackLength, numberOfCheckpoints, minSpacing);

console.log("Checkpoints at positions:", checkpoints);

// Example: render as HTML elements
const trackDiv = document.getElementById('track');
trackDiv.style.width = trackLength + 'px';

trackDiv.innerHTML = `
  <div class="start" style="left:0px;">Start</div>
  ${checkpoints.map((cp, idx) => `<div class="checkpoint" style="left:${cp}px;">CP${idx+1}</div>`).join('')}
  <div class="finish" style="left:${trackLength-10}px;">Finish</div>
`;

// Add some CSS for visualization (optional)
</script>
<style>
#track {
  position: relative;
  height: 40px;
  background: #eee;
  margin-bottom: 20px;
}
.start, .finish, .checkpoint {
  position: absolute;
  top: 10px;
  width: 40px;
  text-align: center;
  background: #cfc;
  border: 1px solid #080;
  border-radius: 5px;
  padding: 2px 0;
}
.checkpoint {
  background: #ccf;
  border-color: #008;
}
.finish {
  background: #fcc;
  border-color: #800;
}
</style>
<div id="track"></div>
